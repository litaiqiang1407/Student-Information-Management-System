@page "/updatedata/{Id}"
@using System.Net.Http
@using System.Text.Json
@using System.Text
@using System.Net;
@inject HttpClient Http

@code {
    [Parameter]
    public string Id { get; set; }

    [Parameter]
    public object Model { get; set; }

    [Parameter]
    public EventCallback<string> OnSuccess { get; set; }

    private string notificationMessage = string.Empty;
    private bool notificationSuccess = true;

    private async Task HandleUpdate()
    {
        var json = JsonSerializer.Serialize(Model);
        var content = new StringContent(json, Encoding.UTF8, "application/json");

        HttpResponseMessage response = null;

        if (Model is UserInfos)
        {
            response = await Http.PutAsync($"api/Admin/UserInfos/{Id}", content);
        }
        else if (Model is Course)
        {
            response = await Http.PutAsync($"api/Admin/Courses/{Id}", content);
        }
        // Add other conditions if needed

        if (response?.StatusCode == HttpStatusCode.OK)
        {
            notificationMessage = "Data updated successfully!";
            notificationSuccess = true;
            await OnSuccess.InvokeAsync(notificationMessage);
        }
        else
        {
            notificationMessage = "Error updating data.";
            notificationSuccess = false;
        }
    }
}
