@page "/adddata"
@using System.Net.Http
@using System.Text.Json
@using System.Text
@using System.Net;
@inject HttpClient Http

@code {
    [Parameter]
    public object Model { get; set; }

    [Parameter]
    public EventCallback<string> OnSuccess { get; set; }

    private string notificationMessage = string.Empty;
    private bool notificationSuccess = true;

    private async Task HandleAdd()
    {
        var json = JsonSerializer.Serialize(Model);
        var content = new StringContent(json, Encoding.UTF8, "application/json");

        HttpResponseMessage response = null;

        if (Model is UserInfos)
        {
            response = await Http.PostAsync("api/Admin/UserInfos", content);
        }
        else if (Model is Course)
        {
            response = await Http.PostAsync("api/Admin/Courses", content);
        }
        // Add other conditions if needed

        if (response?.StatusCode == HttpStatusCode.Created)
        {
            notificationMessage = "Data added successfully!";
            notificationSuccess = true;
            await OnSuccess.InvokeAsync(notificationMessage);
        }
        else
        {
            notificationMessage = "Error adding data.";
            notificationSuccess = false;
        }
    }
}
